function ghRequest(t,e){"use strict";var n=new XMLHttpRequest;n.addEventListener("error",function(){e(new Error("Unable to connect to search service"))}),n.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t;try{t=JSON.parse(n.response)}catch(t){return e(new Error("Unable to read response"))}e(null,t)}},n.open("GET",t),n.send()}function htmlEscape(t){"use strict";var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=/]/g,function(t){return e[t]})}function ghostHunterFrontend(t,e){"use strict";function r(t,s){return t.replace(/{{([^{}]*)}}/g,function(t,e){var n=s[e];return"string"==typeof n||"number"==typeof n?n:t})}"string"==typeof t&&(t=document.querySelector(t)),"string"==typeof e.results&&(e.results=document.querySelector(e.results));var o,n=["endpoint","results"],s={result_template:'<a href="{{link}}"><p><h2>{{title}}</h2><strong>{{pubDate}}</strong></p></a>',info_template:"<p>Number of posts found: {{amount}}</p>",displaySearchInfo:!0,zeroResultsInfo:!0,before:!1,onComplete:!1,endpoint:"",results:""};for(o=0;o<n.length;o++)if(!e[n[o]])throw new Error("Missing required field: "+n[o]);this.options={};var i=Object.keys(s);for(o=0;o<i.length;o++){var u=i[o];this.options[u]=e[u]||s[u]}this.endpoint=this.options.endpoint.replace(/\/$/,"")+"/",this.input=t,this.target=this.input.closest("form"),this.target.onsubmit=function(t){t.isTrusted||(console.warn("GhostHunter-Server:Frontend - element.onsubmit is deprecated. Please use instance.onsubmit. See https://git.io/fbprc"),this.search(this.input.value))}.bind(this),this.submitted=function(t){t.preventDefault(),this.search(this.input.value)},this.target.addEventListener("submit",this.submitted.bind(this)),this._search=function(t,e){var n=this.options.results;if(t)n.textContent="An unexpected error occurred: "+(t.message||t);else{e.errors&&0<e.errors.length&&(n.textContent=e.errors[0].details),n.innerHTML="",this.options.displaySearchInfo&&(this.options.zeroResultsInfo||0<e.meta.count)&&(n.innerHTML=r(this.options.info_template,{amount:e.meta.count,plural:1===e.meta.count?"":"s",search:htmlEscape(this.input.value)}));var s=n.innerHTML;for(o=0;o<e.data.length;o++)s+=r(this.options.result_template,e.data[o]);n.innerHTML=s,this.onComplete&&this.onComplete(e.data)}},this.search=function(t){this.options.before&&(console.warn("GhostHunter-Server:Frontend - instance.before now runs _before_ the XHR request is sent"),this.options.before()),ghRequest(this.endpoint+encodeURIComponent(t),this._search.bind(this))}}
//# sourceMappingURL=frontend.min.js.map